<!DOCTYPE html> 
<html lang="so">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Matrix Love Final Touch</title>
    <style>
        * { box-sizing: border-box; }
        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            overflow: hidden;
            background: #000;
            position: fixed;
        }

        .bg {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-size: cover;
            background-position: center;
            z-index: 1;
            transition: opacity 1s ease;
        }

        #bg1-2 { background-image: url('hppy.jpeg'); opacity: 1; }
        #bg3 { background-image: url('6.jpeg'); opacity: 0; }

        .page {
            position: absolute;
            width: 100%; height: 100%;
            display: flex; justify-content: center;
            align-items: center; z-index: 10;
        }

        #page1 { flex-direction: column; }
        .gift-img { width: 160px; cursor: pointer; animation: bounce 2s infinite; }

        #page2 { 
            display: none; 
            font-size: clamp(150px, 45vw, 280px); 
            color: #E75480; 
            font-weight: bold;
            text-shadow: 0 0 50px #ff0044;
        }

        #page3 { display: none; width: 100%; height: 100%; }
        canvas { position: absolute; top: 0; left: 0; z-index: 5; }

        #final-wrapper {
            position: relative;
            width: 100%; height: 100%;
            z-index: 15; pointer-events: none;
        }

        /* WADNAHA OO XOOGA HOOS LOO SOO DHIGE SI UU U SOO DHAWAADO QORAALKA */
        .name-container {
            position: absolute;
            top: 45%; 
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .girl-name {
            font-size: clamp(24px, 7vw, 35px);
            color: #fff;
            /* Shadow xooggan si loogu arko background-ka pink-ga ah */
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.8), 0 0 25px #ff0044;
            font-weight: 900;
            opacity: 0;
            margin: 0;
        }

        /* QORAALKA OO XOOGA KOR LOO QAADAY SI UU U SOO DHAWAADO WADNAHA */
        .message-container {
            position: absolute;
            bottom: 15%; 
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            text-align: center;
            opacity: 0;
        }

        .hambalyo-title {
            font-size: clamp(24px, 8vw, 38px);
            font-weight: bold;
            color: #ff0044;
            /* Shadow madow si uu u soo dillaaco */
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 1);
            display: block;
            margin-bottom: 5px;
        }

        .jaceyl-text {
            font-size: clamp(15px, 4.2vw, 20px);
            font-weight: 800;
            color: #ffffff;
            /* SHADOW MADOW OO XOOGGAN SI SI FIICAN LOOGU AQRIYO */
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 1), 1px 1px 2px rgba(0, 0, 0, 1);
            display: block;
            line-height: 1.3;
        }

        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        @keyframes simpleFade { to { opacity: 1; } }
    </style>
</head>
<body>

    <div id="bg1-2" class="bg"></div>
    <div id="bg3" class="bg"></div>

    <div id="page1" class="page">
        <img src="button.png" class="gift-img" onclick="startSequence()">
        <p style="color: white; font-weight: bold; margin-top: 20px; text-shadow: 1px 1px 5px #000;">Taabo HalkanüëÜ</p>
    </div>

    <div id="page2" class="page">3</div>

    <div id="page3">
        <canvas id="matrix-canvas"></canvas>
        <div id="final-wrapper">
            <div class="name-container">
                <h1 id="name-display" class="girl-name">FATMA</h1>
            </div>
            <div id="msg-display" class="message-container">
                <span class="hambalyo-title">QALIDEYDI NOLOSHYDI!</span>
                <span class="jaceyl-text">Wan Ku Faraxsanahy Manta ine Tahy Malinka Adunka Kuso Birte ‚ù§Ô∏è</span>
            </div>
        </div>
    </div>

    <audio id="music" src="1.mp3"></audio>

    <script>
        const music = document.getElementById('music');
        
        function startSequence() {
            document.getElementById('page1').style.display = 'none';
            document.getElementById('page2').style.display = 'flex';
            music.play().catch(e => console.log("Audio Error"));

            let count = 3;
            let timer = setInterval(() => {
                count--;
                if(count > 0) {
                    document.getElementById('page2').innerText = count;
                } else {
                    clearInterval(timer);
                    showFinalPage();
                }
            }, 1000);
        }

        function showFinalPage() {
            document.getElementById('page2').style.display = 'none';
            document.getElementById('bg1-2').style.opacity = '0';
            document.getElementById('bg3').style.opacity = '1';
            document.getElementById('page3').style.display = 'block';
            initMatrix();
        }

        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        let heartFormed = false;

        function initMatrix() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            let scale = Math.min(window.innerWidth / 55, 6.8);
            
            for (let i = 0; i < 350; i++) {
                let t = Math.random() * Math.PI * 2;
                let x = 16 * Math.pow(Math.sin(t), 3);
                let y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    tx: x * scale + canvas.width / 2,
                    ty: y * scale + canvas.height * 0.45, // Wadnaha wuxuu u soo degey 45%
                    char: "10#@"[Math.floor(Math.random()*4)]
                });
            }
            animate();
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "#ff0044";
            ctx.font = "10px monospace";

            let arrived = 0;
            particles.forEach(p => {
                let dx = p.tx - p.x;
                let dy = p.ty - p.y;
                p.x += dx * 0.05;
                p.y += dy * 0.05;
                ctx.fillText(p.char, p.x, p.y);
                if(Math.abs(dx) < 1) arrived++;
            });

            if(arrived > 300 && !heartFormed) {
                heartFormed = true;
                setTimeout(() => {
                    document.getElementById('name-display').style.animation = "simpleFade 2s forwards";
                }, 500);
                setTimeout(() => {
                    document.getElementById('msg-display').style.animation = "simpleFade 2s forwards";
                }, 1500);
            }
            requestAnimationFrame(animate);
        }

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
